{
  "meta": {
    "configVersion": "1.0",
    "description": "ä¼ ç»ŸèŠ‚ç‚¹çš„JSONåŒ–é…ç½®æ–‡ä»¶",
    "author": "WorkflowEditor Team",
    "version": "1.0.0",
    "lastUpdated": "2025-01-01",
    "migrationSource": "LegacyNodesConfig.js",
    "purpose": "ä¸ºä¼ ç»ŸèŠ‚ç‚¹æä¾›ç»Ÿä¸€çš„JSONé…ç½®æ ¼å¼ï¼Œæ”¯æŒæ¸è¿›è¿ç§»"
  },
  "nodes": {
    "text-input": {
      "meta": {
        "nodeId": "text-input",
        "displayName": "æ–‡æœ¬è¾“å…¥èŠ‚ç‚¹",
        "description": "è¾“å…¥è¦å¤„ç†çš„æ–‡æœ¬å†…å®¹",
        "author": "system",
        "version": "1.0.0",
        "tags": ["input", "text", "legacy"]
      },
      "node": {
        "type": "text-input",
        "label": "æ–‡æœ¬è¾“å…¥",
        "icon": "ğŸ“",
        "description": "è¾“å…¥è¦å¤„ç†çš„æ–‡æœ¬å†…å®¹",
        "category": "input",
        "theme": "purple"
      },
      "inputSchema": {
        "previousOutput": {
          "type": "any",
          "required": false,
          "description": "æ¥è‡ªä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„è¾“å‡º"
        }
      },
      "outputSchema": {
        "text": {
          "type": "string",
          "description": "è¾“å‡ºçš„æ–‡æœ¬å†…å®¹"
        }
      },
      "fields": [
        {
          "name": "text",
          "type": "textarea",
          "label": "æ–‡æœ¬å†…å®¹",
          "defaultValue": "",
          "required": true,
          "placeholder": "è¯·è¾“å…¥æ–‡æœ¬å†…å®¹...",
          "description": "è¦å¤„ç†çš„æ–‡æœ¬å†…å®¹",
          "validation": {
            "minLength": 1,
            "maxLength": 10000
          }
        },
        {
          "name": "placeholder",
          "type": "text",
          "label": "å ä½ç¬¦æ–‡æœ¬",
          "defaultValue": "è¯·è¾“å…¥æ–‡æœ¬å†…å®¹...",
          "required": false,
          "description": "è¾“å…¥æ¡†çš„å ä½ç¬¦æ–‡æœ¬"
        }
      ],
      "execution": {
        "type": "local",
        "handler": "text_input_processor",
        "timeout": 5,
        "retry": 0
      },
      "nodeUI": {
        "showPreview": true,
        "previewType": "text"
      },
      "components": {
        "main": {
          "type": "legacy",
          "component": "TextInputNode"
        },
        "config": {
          "type": "legacy",
          "fallback": "WorkflowConfigPanel"
        }
      },
      "data": {
        "defaultData": {
          "text": "",
          "placeholder": "è¯·è¾“å…¥æ–‡æœ¬å†…å®¹..."
        },
        "validation": {
          "required": ["text"],
          "rules": {
            "text": {
              "type": "string",
              "minLength": 1
            }
          }
        }
      },
      "dependencies": {
        "apis": [],
        "libraries": [],
        "permissions": []
      }
    },
    "tts": {
      "meta": {
        "nodeId": "tts",
        "displayName": "è¯­éŸ³åˆæˆèŠ‚ç‚¹",
        "description": "å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³",
        "author": "system",
        "version": "1.0.0",
        "tags": ["processor", "tts", "audio", "legacy"]
      },
      "node": {
        "type": "tts",
        "label": "è¯­éŸ³åˆæˆ",
        "icon": "ğŸ¤",
        "description": "å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³",
        "category": "processor",
        "theme": "purple"
      },
      "inputSchema": {
        "text": {
          "type": "string",
          "required": true,
          "description": "è¦è½¬æ¢ä¸ºè¯­éŸ³çš„æ–‡æœ¬"
        }
      },
      "outputSchema": {
        "audio": {
          "type": "blob",
          "description": "ç”Ÿæˆçš„éŸ³é¢‘æ–‡ä»¶"
        },
        "metadata": {
          "type": "object",
          "description": "éŸ³é¢‘å…ƒæ•°æ®"
        }
      },
      "fields": [
        {
          "name": "mode",
          "type": "select",
          "label": "è¯­éŸ³æ¨¡å¼",
          "defaultValue": "character",
          "required": true,
          "options": [
            { "value": "character", "label": "è§’è‰²æ¨¡å¼" },
            { "value": "custom", "label": "è‡ªå®šä¹‰æ¨¡å¼" }
          ],
          "description": "é€‰æ‹©è¯­éŸ³åˆæˆæ¨¡å¼"
        },
        {
          "name": "selectedCharacter",
          "type": "select",
          "label": "é€‰æ‹©è§’è‰²",
          "defaultValue": "",
          "required": false,
          "conditionalDisplay": {
            "field": "mode",
            "value": "character"
          },
          "options": [],
          "description": "é€‰æ‹©é¢„è®¾çš„è¯­éŸ³è§’è‰²"
        },
        {
          "name": "username",
          "type": "text",
          "label": "ç”¨æˆ·å",
          "defaultValue": "workflow_user",
          "required": false,
          "conditionalDisplay": {
            "field": "mode",
            "value": "custom"
          },
          "validation": {
            "minLength": 1
          },
          "description": "è‡ªå®šä¹‰æ¨¡å¼ä¸‹çš„ç”¨æˆ·å"
        },
        {
          "name": "voice_id",
          "type": "select",
          "label": "è¯­éŸ³ID",
          "defaultValue": "",
          "required": false,
          "conditionalDisplay": {
            "field": "mode",
            "value": "custom"
          },
          "options": [],
          "description": "è‡ªå®šä¹‰æ¨¡å¼ä¸‹çš„è¯­éŸ³ID"
        },
        {
          "name": "gender",
          "type": "select",
          "label": "æ€§åˆ«",
          "defaultValue": "",
          "required": false,
          "options": [
            { "value": "", "label": "é»˜è®¤" },
            { "value": "male", "label": "ç”·æ€§" },
            { "value": "female", "label": "å¥³æ€§" }
          ],
          "description": "è¯­éŸ³æ€§åˆ«åå¥½"
        },
        {
          "name": "pitch",
          "type": "select",
          "label": "éŸ³è°ƒ",
          "defaultValue": "",
          "required": false,
          "options": [
            { "value": "", "label": "é»˜è®¤" },
            { "value": "low", "label": "ä½éŸ³è°ƒ" },
            { "value": "normal", "label": "æ­£å¸¸" },
            { "value": "high", "label": "é«˜éŸ³è°ƒ" }
          ],
          "description": "è¯­éŸ³éŸ³è°ƒè®¾ç½®"
        },
        {
          "name": "speed",
          "type": "select",
          "label": "è¯­é€Ÿ",
          "defaultValue": "",
          "required": false,
          "options": [
            { "value": "", "label": "é»˜è®¤" },
            { "value": "slow", "label": "æ…¢é€Ÿ" },
            { "value": "normal", "label": "æ­£å¸¸" },
            { "value": "fast", "label": "å¿«é€Ÿ" }
          ],
          "description": "è¯­éŸ³æ’­æ”¾é€Ÿåº¦"
        }
      ],
      "execution": {
        "type": "api",
        "handler": "tts_processor",
        "timeout": 30,
        "retry": 2,
        "requiresApi": true
      },
      "nodeUI": {
        "showPreview": true,
        "previewType": "audio"
      },
      "components": {
        "main": {
          "type": "legacy",
          "component": "TTSNode"
        },
        "config": {
          "type": "legacy",
          "fallback": "WorkflowConfigPanel"
        }
      },
      "data": {
        "defaultData": {
          "mode": "character",
          "character": "",
          "selectedCharacter": "",
          "gender": "",
          "pitch": "",
          "speed": "",
          "username": "workflow_user",
          "voice_id": "",
          "result": null
        },
        "validation": {
          "required": ["mode"],
          "conditionalRequired": {
            "character": ["selectedCharacter"],
            "custom": ["username", "voice_id"]
          },
          "rules": {
            "mode": {
              "type": "string",
              "enum": ["character", "custom"]
            },
            "username": {
              "type": "string",
              "minLength": 1
            }
          }
        }
      },
      "dependencies": {
        "apis": ["ttsApiUrl"],
        "libraries": [],
        "permissions": ["audio"]
      }
    },
    "output": {
      "meta": {
        "nodeId": "output",
        "displayName": "ç»“æœè¾“å‡ºèŠ‚ç‚¹",
        "description": "é¢„è§ˆå’Œè¾“å‡ºå·¥ä½œæµç»“æœ",
        "author": "system",
        "version": "1.0.0",
        "tags": ["output", "preview", "legacy"]
      },
      "node": {
        "type": "output",
        "label": "ç»“æœè¾“å‡º",
        "icon": "ğŸ‘ï¸",
        "description": "é¢„è§ˆå’Œè¾“å‡ºå·¥ä½œæµç»“æœ",
        "category": "output",
        "theme": "orange"
      },
      "inputSchema": {
        "data": {
          "type": "any",
          "required": false,
          "description": "è¦è¾“å‡ºçš„æ•°æ®"
        }
      },
      "outputSchema": {
        "display": {
          "type": "any",
          "description": "æ ¼å¼åŒ–çš„æ˜¾ç¤ºæ•°æ®"
        }
      },
      "fields": [
        {
          "name": "displayMode",
          "type": "select",
          "label": "æ˜¾ç¤ºæ¨¡å¼",
          "defaultValue": "auto",
          "required": false,
          "options": [
            { "value": "auto", "label": "è‡ªåŠ¨æ¨¡å¼" },
            { "value": "compact", "label": "ç´§å‡‘æ¨¡å¼" },
            { "value": "full", "label": "å®Œæ•´æ¨¡å¼" }
          ],
          "description": "é€‰æ‹©ç»“æœæ˜¾ç¤ºæ¨¡å¼"
        },
        {
          "name": "autoExpand",
          "type": "checkbox",
          "label": "è‡ªåŠ¨å±•å¼€",
          "defaultValue": false,
          "required": false,
          "description": "æ˜¯å¦è‡ªåŠ¨å±•å¼€æ˜¾ç¤ºå†…å®¹"
        },
        {
          "name": "showValidation",
          "type": "checkbox",
          "label": "æ˜¾ç¤ºéªŒè¯ä¿¡æ¯",
          "defaultValue": true,
          "required": false,
          "description": "æ˜¯å¦æ˜¾ç¤ºæ•°æ®éªŒè¯ä¿¡æ¯"
        },
        {
          "name": "downloadEnabled",
          "type": "checkbox",
          "label": "å¯ç”¨ä¸‹è½½",
          "defaultValue": true,
          "required": false,
          "description": "æ˜¯å¦å¯ç”¨ç»“æœä¸‹è½½åŠŸèƒ½"
        },
        {
          "name": "maxPreviewSize",
          "type": "number",
          "label": "æœ€å¤§é¢„è§ˆå¤§å°",
          "defaultValue": 1000,
          "required": false,
          "validation": {
            "min": 100,
            "max": 10000
          },
          "description": "é¢„è§ˆå†…å®¹çš„æœ€å¤§å­—ç¬¦æ•°"
        },
        {
          "name": "preferredPanel",
          "type": "select",
          "label": "é¦–é€‰é¢æ¿",
          "defaultValue": "main",
          "required": false,
          "options": [
            { "value": "main", "label": "ä¸»é¢æ¿" },
            { "value": "side", "label": "ä¾§é¢æ¿" },
            { "value": "modal", "label": "æ¨¡æ€çª—å£" }
          ],
          "description": "ç»“æœæ˜¾ç¤ºçš„é¦–é€‰é¢æ¿ä½ç½®"
        }
      ],
      "execution": {
        "type": "local",
        "handler": "output_processor",
        "timeout": 5,
        "retry": 0
      },
      "nodeUI": {
        "showPreview": true,
        "previewType": "mixed"
      },
      "components": {
        "main": {
          "type": "legacy",
          "component": "OutputNode"
        },
        "config": {
          "type": "legacy",
          "fallback": "WorkflowConfigPanel"
        }
      },
      "data": {
        "defaultData": {
          "displayMode": "auto",
          "autoExpand": false,
          "showValidation": true,
          "downloadEnabled": true,
          "maxPreviewSize": 1000,
          "preferredPanel": "main",
          "result": null,
          "timestamp": null
        },
        "validation": {
          "required": [],
          "rules": {
            "maxPreviewSize": {
              "type": "number",
              "min": 100,
              "max": 10000
            }
          }
        }
      },
      "dependencies": {
        "apis": [],
        "libraries": [],
        "permissions": []
      }
    },
    "download": {
      "meta": {
        "nodeId": "download",
        "displayName": "æ–‡ä»¶ä¸‹è½½èŠ‚ç‚¹",
        "description": "ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°è®¾å¤‡",
        "author": "system",
        "version": "1.0.0",
        "tags": ["output", "download", "file", "legacy"]
      },
      "node": {
        "type": "download",
        "label": "æ–‡ä»¶ä¸‹è½½",
        "icon": "ğŸ“¥",
        "description": "ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°è®¾å¤‡",
        "category": "output",
        "theme": "green"
      },
      "inputSchema": {
        "file": {
          "type": "any",
          "required": false,
          "description": "è¦ä¸‹è½½çš„æ–‡ä»¶æ•°æ®"
        }
      },
      "outputSchema": {
        "downloadResult": {
          "type": "object",
          "description": "ä¸‹è½½æ“ä½œç»“æœ"
        }
      },
      "fields": [
        {
          "name": "autoDownload",
          "type": "checkbox",
          "label": "è‡ªåŠ¨ä¸‹è½½",
          "defaultValue": false,
          "required": false,
          "description": "æ˜¯å¦åœ¨è·å¾—æ–‡ä»¶åè‡ªåŠ¨ä¸‹è½½"
        },
        {
          "name": "customFileName",
          "type": "text",
          "label": "è‡ªå®šä¹‰æ–‡ä»¶å",
          "defaultValue": "",
          "required": false,
          "placeholder": "ç•™ç©ºä½¿ç”¨é»˜è®¤æ–‡ä»¶å",
          "validation": {
            "pattern": "^[^<>:\"/\\\\|?*]*$",
            "message": "æ–‡ä»¶åä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦"
          },
          "description": "è‡ªå®šä¹‰ä¸‹è½½æ–‡ä»¶çš„åç§°"
        },
        {
          "name": "customPath",
          "type": "text",
          "label": "è‡ªå®šä¹‰è·¯å¾„",
          "defaultValue": "",
          "required": false,
          "placeholder": "ç•™ç©ºä½¿ç”¨é»˜è®¤ä¸‹è½½è·¯å¾„",
          "description": "è‡ªå®šä¹‰ä¸‹è½½æ–‡ä»¶çš„ä¿å­˜è·¯å¾„"
        },
        {
          "name": "downloadFormat",
          "type": "select",
          "label": "ä¸‹è½½æ ¼å¼",
          "defaultValue": "auto",
          "required": false,
          "options": [
            { "value": "auto", "label": "è‡ªåŠ¨æ£€æµ‹" },
            { "value": "wav", "label": "WAV éŸ³é¢‘" },
            { "value": "mp3", "label": "MP3 éŸ³é¢‘" },
            { "value": "txt", "label": "æ–‡æœ¬æ–‡ä»¶" },
            { "value": "json", "label": "JSON æ–‡ä»¶" },
            { "value": "png", "label": "PNG å›¾ç‰‡" },
            { "value": "jpg", "label": "JPG å›¾ç‰‡" }
          ],
          "description": "æŒ‡å®šä¸‹è½½æ–‡ä»¶çš„æ ¼å¼"
        },
        {
          "name": "showProgress",
          "type": "checkbox",
          "label": "æ˜¾ç¤ºè¿›åº¦",
          "defaultValue": true,
          "required": false,
          "description": "æ˜¯å¦æ˜¾ç¤ºä¸‹è½½è¿›åº¦"
        },
        {
          "name": "allowRetry",
          "type": "checkbox",
          "label": "å…è®¸é‡è¯•",
          "defaultValue": true,
          "required": false,
          "description": "ä¸‹è½½å¤±è´¥æ—¶æ˜¯å¦å…è®¸é‡è¯•"
        }
      ],
      "execution": {
        "type": "local",
        "handler": "download_processor",
        "timeout": 60,
        "retry": 3
      },
      "nodeUI": {
        "showPreview": true,
        "previewType": "download"
      },
      "components": {
        "main": {
          "type": "legacy",
          "component": "DownloadNode"
        },
        "config": {
          "type": "legacy",
          "fallback": "WorkflowConfigPanel"
        }
      },
      "data": {
        "defaultData": {
          "autoDownload": false,
          "customFileName": "",
          "customPath": "",
          "downloadFormat": "auto",
          "showProgress": true,
          "allowRetry": true,
          "result": null
        },
        "validation": {
          "required": [],
          "rules": {
            "customFileName": {
              "type": "string",
              "pattern": "^[^<>:\"/\\\\|?*]*$"
            },
            "downloadFormat": {
              "type": "string",
              "enum": ["auto", "wav", "mp3", "txt", "json", "png", "jpg"]
            }
          }
        }
      },
      "dependencies": {
        "apis": [],
        "libraries": [],
        "permissions": ["downloads"]
      }
    }
  },
  "categories": {
    "input": {
      "label": "è¾“å…¥èŠ‚ç‚¹",
      "description": "æ•°æ®è¾“å…¥å’Œé‡‡é›†èŠ‚ç‚¹",
      "icon": "ğŸ“",
      "color": "#8B5CF6"
    },
    "processor": {
      "label": "å¤„ç†èŠ‚ç‚¹", 
      "description": "æ•°æ®å¤„ç†å’Œè½¬æ¢èŠ‚ç‚¹",
      "icon": "âš™ï¸",
      "color": "#3B82F6"
    },
    "output": {
      "label": "è¾“å‡ºèŠ‚ç‚¹",
      "description": "ç»“æœè¾“å‡ºå’Œå±•ç¤ºèŠ‚ç‚¹", 
      "icon": "ğŸ“¤",
      "color": "#F97316"
    }
  },
  "themes": {
    "purple": {
      "primary": "#8B5CF6",
      "secondary": "#F3E8FF",
      "text": "#581C87"
    },
    "orange": {
      "primary": "#F97316", 
      "secondary": "#FFF7ED",
      "text": "#9A3412"
    },
    "green": {
      "primary": "#10B981",
      "secondary": "#ECFDF5", 
      "text": "#065F46"
    }
  },
  "migration": {
    "from": "LegacyNodesConfig.js",
    "to": "JSON Configuration",
    "status": "completed",
    "notes": [
      "æ‰€æœ‰ä¼ ç»ŸèŠ‚ç‚¹å·²æˆåŠŸè½¬æ¢ä¸ºJSONé…ç½®æ ¼å¼",
      "ä¿æŒäº†åŸæœ‰çš„åŠŸèƒ½å’ŒéªŒè¯è§„åˆ™",
      "æ·»åŠ äº†æ›´è¯¦ç»†çš„å­—æ®µå®šä¹‰å’ŒUIé…ç½®",
      "æ”¯æŒæ¡ä»¶æ˜¾ç¤ºå’Œé«˜çº§éªŒè¯"
    ],
    "compatibility": {
      "backward": true,
      "forward": true,
      "breaking_changes": []
    }
  }
}
